@model IEnumerable<Hearts.ViewModel.GameModel>

@{
    ViewBag.Title = "ViewGames";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>All Games</h2>

<p>
    @Html.ActionLink("Create New Game", "Create", null, new { @class = "btn btn-primary" })
</p>
<br/>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Status)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.StartTime)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.EndTime)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Player1)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Player2)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Player3)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Player4)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Status)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.StartTime)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.EndTime)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Player1.UserName)
        </td>
        <td>
            @if (item.Player2 == null) {
                Html.DisplayText("Waiting"); }
            else {
                Html.DisplayFor(modelItem => item.Player2.UserName); }
        </td>
        <td>
            @if (item.Player3 == null) {
                Html.DisplayText("Waiting"); }
            else {
                Html.DisplayFor(modelItem => item.Player3.UserName); }
        </td>
        <td>
            @if (item.Player4 == null) {
                Html.DisplayText("Waiting"); }
            else {
                Html.DisplayFor(modelItem => item.Player4.UserName); }
        </td>
        <td>
            @Html.ActionLink("Join Game", "Join", new { gameId = item.GameId }, null)
        </td>
    </tr>
}
@if (Model.Count() == 0) {
    <tr>
        <td colspan="7">
            No waiting games currently availablle. 
            You may created a new game here: @Html.ActionLink("Create New Game", "Create")
        </td>
    </tr>
}
</table>
